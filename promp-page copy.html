<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Styled Form with Glassmorphism</title>
    <link rel="stylesheet" href="/prompt.css">
</head>
<body>
    <header>
        <div class="navbar header-container">
            <img src="/Images/police_logo-removebg-preview.png" alt="Police Logo" class="logo">
            <h1>FIR Generation System</h1>
        </div>
    </header>
    <section class="section">           AIzaSyBgmrMAun1t6XZVafB8wi-HWFb93TrN0ko
        <!--  -->
        <form action="">
            <section>
                <h3>Complainant Details</h3>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" placeholder="Enter Name" required>
                </div>
    
                <div class="form-group">
                    <label for="mobile">Mobile Number</label>
                    <input type="tel" id="mobile" name="mobile" maxlength="10" placeholder="Enter Mobile Number" required>
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" placeholder="Enter Address" required>
                </div>
                </section>
                <section>
                    <h3>Accuset Details</h3>
                    <div class="form-group">
                        <label for="aname">Accuset Name</label>
                        <input type="text" id="aname" placeholder="Enter Name">
                    </div>
                    <div class="form-group">
                        <label for="mobile">Mobile Number</label>
                        <input type="tel" id="mobile" name="mobile" maxlength="10" placeholder="Enter Mobile Number">
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" id="address" name="address" placeholder="Enter Address">
                    </div>
                </section>
                <section>
                    <h3>Officer Details</h3>
                    <div class="form-group">
                        <label for="pname">Name</label>
                        <input type="text" id="pname" placeholder="Enter Name">
                    </div>
                    <div class="form-group">
                        <label for="rank">Rank</label>
                        <select name="rank" id="rank">
                            <option value="">Select Rank</option>
                            <option value="1">Special Sub-Inspector of Police(SSI)</option>
                            <option value="2">sub inspector of police(SI)</option>
                            <option value="">inspector of police(PI)</option>
                            <option value="">Deputy Superintendent of police(DSP)</option>
                            <option value="">assistant Superintendent of police(ASP)</option>
                            <option value="">Additional Superintendent of police(ADSP)</option>
                            <option value="">Superintendent of police(SP)</option>
                            <option value="">Deputy Insepector General of police(DIG)</option>
                            <option value="">Insepector General of police(IG)</option>
                            <option value="">Additional Director General of police(ADGP)</option>
                            <option value="">Special Director Genral of police(SDGP)</option>
                            <option value="">Director General of police(DGP)</option>
                        </select>
                    </div>
            </section>
        </section>

            <section class="address-section">
                <!--<h3>Enter your Address</h3>  -->
                
                <!--<div class="form-group">
                    <label for="door-no">Door No</label>
                    <input type="number" id="door-no" name="door-no">
                </div>

                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address">
                </div>-->
                
                <div class="form-group">
                    <!-- District Dropdown -->
                    <label for="district">Select District</label>
                    <select id="district" onchange="populateStation()">
                        <option value="">Select District</option>
                    </select>
                </div>

                <div class="form-group">
                    <!-- City Dropdown -->
                    <label for="police_station">Select Police Staion</label>
                    <select id="police_station">
                        <option value="">Select Station</option>
                    </select>
                </div>
                <!--<div class="form-group">
                     Panchayat Dropdown 
                    <label for="panchayat">Select Panchayat:</label>
                    <select id="panchayat">
                        <option value="">Select Panchayat</option>
                    </select>
                </div>-->

                
                <!--<div class="form-group">
                    <label for="pincode">Enter Pincode:</label>
                    <input type="number" id="pincode" name="pincode">
                </div>
            </section>-->
            <section>
                <div>
                    <h3>Incident Details</h3>
                    <label for="incident_date">Date of Incident</label>
                    <input type="date" id="incident_date"><br>
                </div>
   
                <div>
                    <label for = "incident_time">Time of Incident</label>
                    <input type="time" id="incident_time"><br>
                </div>
                <div>
                    <label for="incident_location">Location</label>
                    <input type="text" id="incident_location"><br>
                </div>
                <div>
                    <label for="incident_description">Incident Description (Short)</label><br>
                    <textarea id="incident_description" rows="4" cols="50"></textarea><br>
                </div>
            </div>
        </section>
        </form>
        <div class="form-footer">
            <button type="save">Save</button>
            <button onclick="generateFIR()">Generate FIR</button>
        </div>
    </section>

    <script>
        const districtSelect = document.getElementById("district");
        const policeStationSelect = document.getElementById("police_station");
    
        function populateStation() {
            var districtSelect = document.getElementById("district");
            var stationSelect = document.getElementById("police_station");
        
            var selectedDistrict = districtSelect.value;
        
            // Clear existing options
            stationSelect.innerHTML = '<option value="">Select Station</option>';
        
            if (selectedDistrict && data[selectedDistrict]) {
                var stations = Object.values(data[selectedDistrict])[0]; // Extract station list
        
                stations.forEach(function(station) {
                    var option = document.createElement("option");
                    option.value = station;
                    option.textContent = station;
                    stationSelect.appendChild(option);
                });
            }
        }
        
        // Populate the district dropdown on page load
        document.addEventListener("DOMContentLoaded", function () {
            var districtSelect = document.getElementById("district");
        
            for (var district in data) {
                var option = document.createElement("option");
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            }
        });
    

        async function generateFIR() {
            const firDetails = {
                district: document.getElementById("district").value,
                station: document.getElementById("police_station").value,
                complainant_name: document.getElementById("complainant_name").value,
                complainant_address: document.getElementById("complainant_address").value,
                complainant_phone: document.getElementById("complainant_phone").value,
                accused_name: document.getElementById("accused_name").value,
                accused_address: document.getElementById("accused_address").value,
                accused_phone: document.getElementById("accused_phone").value,
                incident_date: document.getElementById("incident_date").value,
                incident_location: document.getElementById("incident_location").value,
                incident_description: document.getElementById("incident_description").value,
                
                
            };

            try{
                const response = await fetch("http://127.0.0.1:5000/generate_fir", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(firDetails),
            });

            if (response.ok) {
                document.getElementById("downloadLink").style.display = "block";
            } else {
                alert("Error generating FIR.");
            }
            }catch (error){
                console.error("Error :", error);
                alert("Failed to connect to server.")
            }
        }
    </script>
</body>
</html>
